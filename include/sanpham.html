<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sản phẩm - Zofal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Toastr CSS and JS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="../js/filter.js"></script>
    <style>
      :root {
        --primary-color: #2a6fb4;
        --secondary-color: #0098fd;
        --accent-color: #e74c3c;
        --light-bg: #f5f6fa;
      }

      body {
        background-color: var(--light-bg);
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      .cart-section {
        padding: 40px 0;
      }

      .cart-item {
        background: #fff;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        transition: transform 0.3s ease;
      }

      .cart-item:hover {
        transform: translateY(-5px);
      }

      .cart-item img {
        border-radius: 10px;
        width: 100px;
        height: 100px;
        object-fit: cover;
      }

      .cart-summary {
        background: #fff;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      }

      .btn-primary {
        background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        border: none;
        padding: 12px 25px;
        border-radius: 10px;
      }

      .btn-primary:hover {
        opacity: 0.9;
        transform: translateY(-2px);
      }

      .modal-content {
        border-radius: 15px;
      }

      .modal-header {
        background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        color: white;
        border-radius: 15px 15px 0 0;
      }

      .form-control {
        border-radius: 10px;
        padding: 12px;
        border: 2px solid #eee;
      }

      .form-control:focus {
        border-color: var(--secondary-color);
        box-shadow: none;
      }

      .dropdown:hover .dropdown-menu {
        display: block;
      }
    </style>
    <script>
      // Create logout button
      const logoutButton = document.createElement("a");
      logoutButton.classList.add("btn", "btn-outline-secondary", "me-2");
      logoutButton.innerHTML = '<i class="fas fa-sign-out-alt"></i>';
      logoutButton.style.display = "none";

      // Function to check login status
      function checkLoginStatus() {
        const sessionPath = window.location.pathname.includes("/include/")
          ? "../php/check_session.php"
          : "php/check_session.php";

        fetch(sessionPath)
          .then((response) => response.json())
          .then((data) => {
            console.log("Session data:", data);
            if (!data.loggedIn) {
              // Update UI for not logged in user
              const userButton = document.querySelector(
                ".user-actions .btn-outline-secondary"
              );
              userButton.href = window.location.pathname.includes("/include/")
                ? "dangnhap.html"
                : "include/dangnhap.html";
              userButton.innerHTML = '<i class="far fa-user"></i> Đăng nhập';
            } else {
              // Update UI for logged in user
              const userButton = document.querySelector(
                ".user-actions .btn-outline-secondary"
              );
              userButton.href = window.location.pathname.includes("/include/")
                ? "trangcanhan.html"
                : "include/trangcanhan.html";
              userButton.innerHTML = '<i class="far fa-user"></i>';

              // Show logout button
              logoutButton.style.display = "inline-block";
              userButton.parentNode.insertBefore(
                logoutButton,
                userButton.nextSibling
              );

              // Add logout handler
              logoutButton.addEventListener("click", function (e) {
                e.preventDefault();
                const logoutPath = window.location.pathname.includes(
                  "/include/"
                )
                  ? "../php/dangxuat.php"
                  : "php/dangxuat.php";
                fetch(logoutPath)
                  .then((response) => response.json())
                  .then((data) => {
                    if (data.success) {
                      window.location.href = window.location.pathname.includes(
                        "/include/"
                      )
                        ? "../index.html"
                        : "index.html";
                    }
                  })
                  .catch((error) => console.error("Error logging out:", error));
              });
            }
          })
          .catch((error) => {
            console.error("Error checking login status:", error);
          });
      }

      // Check login status when page loads
      document.addEventListener("DOMContentLoaded", checkLoginStatus);
    </script>

  </head>
  <body>
    <!-- Top Bar -->
     <div
     class="top-bar py-3"
     style="
       background: linear-gradient(
         45deg,
         var(--primary-color),
         var(--secondary-color)
       );
     "
   >
     <div class="container">
       <div class="row align-items-center">
         <div class="col-md-6">
           <span class="text-white me-4"
             ><i class="fas fa-phone-alt me-2"></i>0123 456 789</span
           >
           <span class="text-white"
             ><i class="fas fa-envelope me-2"></i>contact@zofal.com</span
           >
         </div>
         <div class="col-md-6 text-end">
           <a href="#" class="text-white me-3"
             ><i class="fab fa-facebook-f"></i
           ></a>
           <a href="#" class="text-white me-3"
             ><i class="fab fa-instagram"></i
           ></a>
           <a href="#" class="text-white"><i class="fab fa-tiktok"></i></a>
         </div>
       </div>
     </div>
   </div>

   <!-- Header -->
   <header class="bg-white py-4 shadow-sm">
     <div class="container">
       <div class="row align-items-center">
         <div class="col-lg-3">
           <a href="../index.html" style="text-decoration: none">
             <h1
               style="
                 font-size: 2.5rem;
                 font-weight: bold;
                 margin: 0;
                 background: linear-gradient(
                   45deg,
                   var(--primary-color),
                   var(--secondary-color)
                 );
                 -webkit-background-clip: text;
                 -webkit-text-fill-color: transparent;
               "
             >
               ZOFAL
             </h1>
           </a>
         </div>
         <div class="col-lg-6">
           <div class="search-bar">
             <div class="input-group">
               <input
                 type="text"
                 class="form-control"
                 placeholder="Tìm kiếm sản phẩm..."
               />
               <button class="btn btn-primary">
                 <i class="fas fa-search"></i>
               </button>
             </div>
           </div>
         </div>
         <div class="col-3 text-end user-actions">
           <a href="dangnhap.html" class="btn btn-outline-secondary me-2">
             <i class="far fa-user"></i> Tài khoản
           </a>
           <a href="giohang.html" class="btn btn-primary position-relative">
             <i class="fas fa-shopping-cart"></i>
             <!-- Giỏ hàng -->
             <span
               class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
               id="cart-count"
               >0</span
             >
           </a>
         </div>
       </div>
     </div>
   </header>

   <!-- Navigation -->
   <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
     <div class="container">
       <button
         class="navbar-toggler"
         type="button"
         data-bs-toggle="collapse"
         data-bs-target="#navbarNav"
       >
         <span class="navbar-toggler-icon"></span>
       </button>
       <div class="collapse navbar-collapse" id="navbarNav">
         <ul class="navbar-nav mx-auto">
           <li class="nav-item">
             <a class="nav-link px-4" href="../index.html">Trang chủ</a>
           </li>
           <li class="nav-item dropdown">
             <a class="nav-link px-4" href="sanpham.html">
               Sản phẩm <i class="fas fa-chevron-down"></i>
             </a>
             <ul class="dropdown-menu">
               <li>
                 <a class="dropdown-item" href="sanpham.html?category=aokhoac"
                   >Áo khoác</a
                 >
               </li>
               <li>
                 <a class="dropdown-item" href="sanpham.html?category=aothun"
                   >Áo thun</a
                 >
               </li>
               <li>
                 <a class="dropdown-item" href="sanpham.html?category=quan"
                   >Quần</a
                 >
               </li>
               <li>
                 <a class="dropdown-item" href="sanpham.html?category=vaydam"
                   >Váy đầm</a
                 >
               </li>
             </ul>
           </li>

           <li class="nav-item">
             <a class="nav-link px-4" href="#">Liên hệ</a>
           </li>
         </ul>
       </div>
     </div>
   </nav>

    <!-- Products Section -->
    <section class="products py-5">
      <div class="container">
        <div class="row mb-4">
          <div class="col-md-8">
            <h2 class="section-title" id="categoryTitle">Tất cả sản phẩm</h2>
          </div>
          <div class="col-md-4">
            <select class="form-select" id="sortSelect">
              <option value="default">Sắp xếp theo</option>
              <option value="price-asc">Giá: Thấp đến cao</option>
              <option value="price-desc">Giá: Cao đến thấp</option>
              <option value="name-asc">Tên: A-Z</option>
              <option value="name-desc">Tên: Z-A</option>
            </select>
          </div>
        </div>

        <div class="row" id="productGrid">
          <!-- Products will be dynamically loaded here -->
        </div>

        <!-- Pagination -->
        <!-- <nav aria-label="Page navigation" class="mt-4">
          <ul class="pagination justify-content-center">
            <li class="page-item disabled">
              <a class="page-link" href="#" tabindex="-1">Trước</a>
            </li>
            <li class="page-item active"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item">
              <a class="page-link" href="#">Sau</a>
            </li>
          </ul>
        </nav> -->
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5 mt-5">
      <div class="container">
        <div class="row g-4">
          <div class="col-lg-4">
            <h5 class="fw-bold mb-4">Về Zofal</h5>
            <p class="text-white-50">
              Zofal là thương hiệu thời trang hàng đầu Việt Nam, cung cấp những
              sản phẩm thời trang chất lượng cao với giá cả hợp lý.
            </p>
            <div class="social-links mt-4">
              <a href="#" class="text-white me-3"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a href="#" class="text-white me-3"
                ><i class="fab fa-instagram"></i
              ></a>
              <a href="#" class="text-white me-3"
                ><i class="fab fa-tiktok"></i
              ></a>
              <a href="#" class="text-white"><i class="fab fa-youtube"></i></a>
            </div>
          </div>
          <div class="col-lg-4">
            <h5 class="fw-bold mb-4">Liên kết nhanh</h5>
            <ul class="list-unstyled">
              <li class="mb-3">
                <a href="../index.html" class="text-white-50 text-decoration-none">
                  <i class="fas fa-chevron-right me-2"></i>Trang chủ
                </a>
              </li>
              <li class="mb-3">
                <a href="sanpham.html" class="text-white-50 text-decoration-none">
                  <i class="fas fa-chevron-right me-2"></i>Sản phẩm
                </a>
              </li>
              <li class="mb-3">
                <a href="#" class="text-white-50 text-decoration-none">
                  <i class="fas fa-chevron-right me-2"></i>Về chúng tôi
                </a>
              </li>
              <li class="mb-3">
                <a href="#" class="text-white-50 text-decoration-none">
                  <i class="fas fa-chevron-right me-2"></i>Liên hệ
                </a>
              </li>
            </ul>
          </div>
          <div class="col-lg-4">
            <h5 class="fw-bold mb-4">Thông tin liên hệ</h5>
            <div class="contact-info text-white-50">
              <p class="mb-3">
                <i class="fas fa-map-marker-alt me-3"></i>
                123 Đường ABC, Quận XYZ, TP.HCM
              </p>
              <p class="mb-3">
                <i class="fas fa-phone-alt me-3"></i>
                0123 456 789
              </p>
              <p class="mb-3">
                <i class="fas fa-envelope me-3"></i>
                contact@zofal.com
              </p>
              <p class="mb-0">
                <i class="fas fa-clock me-3"></i>
                Thứ 2 - Chủ nhật: 9:00 - 21:00
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      // Initialize AOS
      AOS.init();

      // Function to update products based on category
      function updateProducts(category) {
        const productGrid = document.getElementById('productGrid');
        const categoryTitle = document.getElementById('categoryTitle');
        
        // Update title based on category
        if (category) {
          categoryTitle.textContent = category.charAt(0).toUpperCase() + category.slice(1);
        } else {
          categoryTitle.textContent = 'Tất cả sản phẩm';
        }

        // Here you would typically fetch products from your backend
        // For now, we'll simulate with static content
        productGrid.innerHTML = ''; // Clear existing products
        
      }

      // Get category from URL parameters
      const urlParams = new URLSearchParams(window.location.search);
      const category = urlParams.get('category');
      
      // Initial load of products
      updateProducts(category);

      // Handle sorting
      document.getElementById('sortSelect').addEventListener('change', function(e) {
        // Implement sorting logic here
        console.log('Sort by:', e.target.value);
      });
    </script>
  </body>
</html>
